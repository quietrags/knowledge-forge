<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Layout D: Hybrid</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Source+Sans+3:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Source Sans 3', sans-serif; background: #FAF8F5; color: #1C1917; font-size: 14px; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

    /* Header */
    .header { display: flex; align-items: center; justify-content: space-between; padding: 10px 20px; background: #fff; border-bottom: 1px solid #E7E5E0; flex-shrink: 0; }
    .logo { font-family: 'Cormorant Garamond', serif; font-size: 18px; font-weight: 600; }
    .mode-switch { display: flex; gap: 4px; background: #F5F2ED; padding: 4px; border-radius: 6px; }
    .mode-btn { padding: 6px 14px; border: none; background: transparent; border-radius: 4px; font-size: 13px; cursor: pointer; transition: all 0.2s; }
    .mode-btn.active { background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.08); font-weight: 600; }
    .mode-btn.build.active { color: #059669; }
    .mode-btn.understand.active { color: #2563EB; }
    .mode-btn.research.active { color: #7C3AED; }

    /* Path Bar - Knowledge Galaxy Trail */
    .path-bar { background: #fff; border-bottom: 1px solid #E7E5E0; padding: 12px 20px; display: flex; align-items: center; gap: 16px; flex-shrink: 0; }
    .path-label { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: #A8A29E; }
    .path-trail { display: flex; align-items: center; gap: 8px; flex: 1; }
    .path-node { display: flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 4px; cursor: pointer; transition: background 0.15s; }
    .path-node:hover { background: #F5F2ED; }
    .path-node.current { background: #ECFDF5; font-weight: 600; color: #059669; }
    .node-dot { width: 8px; height: 8px; border-radius: 50%; }
    .node-dot.solid { background: #059669; }
    .node-dot.partial { background: linear-gradient(90deg, #2563EB 50%, #E7E5E0 50%); }
    .node-dot.explored { border: 2px solid #A8A29E; background: transparent; }
    .path-arrow { color: #D4D4D4; font-size: 12px; }
    .path-divider { width: 1px; height: 20px; background: #E7E5E0; margin: 0 8px; }
    .neighbors-label { font-size: 10px; color: #A8A29E; text-transform: uppercase; letter-spacing: 0.05em; }
    .neighbor-chips { display: flex; gap: 6px; }
    .neighbor-chip { font-size: 12px; padding: 4px 10px; background: #F5F2ED; border-radius: 12px; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; gap: 4px; }
    .neighbor-chip:hover { background: #E7E5E0; }
    .neighbor-chip .icon { font-size: 10px; }

    /* Main Layout */
    .main { flex: 1; display: grid; grid-template-columns: 1fr 380px; grid-template-rows: 1fr 1fr; overflow: hidden; gap: 1px; background: #E7E5E0; }

    /* Tabbed Workspace */
    .workspace { grid-row: 1 / -1; background: #fff; display: flex; flex-direction: column; overflow: hidden; }
    .tab-bar { display: flex; gap: 0; background: #F5F2ED; padding: 10px 16px 0; border-bottom: 1px solid #E7E5E0; flex-shrink: 0; }
    .tab { padding: 10px 18px; background: transparent; border: none; font-size: 13px; cursor: pointer; border-radius: 6px 6px 0 0; color: #78716C; transition: all 0.15s; position: relative; }
    .tab:hover { color: #1C1917; }
    .tab.active { background: #fff; color: #1C1917; font-weight: 500; }
    .tab.active::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 2px; background: #059669; }
    .tab-content { flex: 1; overflow-y: auto; padding: 20px 24px; }
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* Chronicle entries */
    .entry { margin-bottom: 24px; padding-left: 18px; border-left: 2px solid #E7E5E0; }
    .entry-meta { font-size: 11px; color: #A8A29E; margin-bottom: 6px; display: flex; align-items: center; gap: 8px; }
    .entry-dot { width: 6px; height: 6px; border-radius: 50%; background: #E7E5E0; }
    .entry-content { font-size: 15px; line-height: 1.75; }
    .entry-content strong { color: #059669; }
    .anchor { display: inline-block; padding: 2px 10px; background: #DBEAFE; color: #1E40AF; border-radius: 4px; font-size: 13px; font-weight: 500; }

    .entry.insight { background: linear-gradient(90deg, #ECFDF5 0%, #FAF8F5 100%); margin-left: -24px; margin-right: -24px; padding: 16px 24px 16px 42px; border-left: 4px solid #059669; border-radius: 0; }
    .entry.insight .entry-meta { color: #059669; font-weight: 600; }
    .entry.insight .entry-dot { background: #059669; }

    .entry.doubt { background: linear-gradient(90deg, #FFFBEB 0%, #FAF8F5 100%); margin-left: -24px; margin-right: -24px; padding: 16px 24px 16px 42px; border-left: 4px solid #F59E0B; border-radius: 0; }
    .entry.doubt .entry-meta { color: #F59E0B; font-weight: 600; }
    .entry.doubt .entry-dot { background: #F59E0B; }

    /* Anchors tab */
    .anchor-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
    .anchor-card { padding: 14px; background: #F9FAFB; border-radius: 8px; border: 1px solid #E7E5E0; }
    .anchor-card.strong { border-left: 3px solid #059669; background: #ECFDF5; }
    .anchor-card.medium { border-left: 3px solid #2563EB; background: #EFF6FF; }
    .anchor-name { font-weight: 600; margin-bottom: 4px; }
    .anchor-use { font-size: 12px; color: #57534E; }

    /* Boundaries tab */
    .boundary-item { padding: 14px; background: #FFFBEB; border-left: 3px solid #F59E0B; border-radius: 0 8px 8px 0; margin-bottom: 12px; }
    .boundary-question { font-weight: 500; margin-bottom: 6px; }
    .boundary-note { font-size: 13px; color: #78716C; }

    /* Vocabulary tab */
    .vocab-item { display: flex; gap: 12px; padding: 12px 0; border-bottom: 1px solid #F5F2ED; }
    .vocab-term { font-weight: 600; min-width: 120px; color: #059669; }
    .vocab-def { color: #57534E; line-height: 1.5; }

    /* Curiosity tab */
    .curiosity-list { display: flex; flex-direction: column; gap: 12px; }
    .curiosity-item { display: flex; gap: 12px; padding: 12px; background: #F9FAFB; border-radius: 8px; cursor: pointer; transition: background 0.15s; }
    .curiosity-item:hover { background: #F5F2ED; }
    .curiosity-icon { font-size: 18px; }
    .curiosity-label { font-size: 11px; color: #A8A29E; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 2px; }
    .curiosity-text { font-size: 14px; }
    .curiosity-text strong { color: #1C1917; }

    /* Right Panels */
    .panel { background: #fff; display: flex; flex-direction: column; overflow: hidden; }
    .panel-header { padding: 12px 16px; border-bottom: 1px solid #E7E5E0; display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; }
    .panel-title { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: #A8A29E; }
    .panel-actions { display: flex; gap: 6px; }
    .panel-btn { width: 24px; height: 24px; border: 1px solid #E7E5E0; background: #fff; border-radius: 4px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .panel-btn:hover { background: #F5F2ED; }
    .panel-body { flex: 1; overflow-y: auto; padding: 12px 16px; }

    /* Code Panel */
    .code-block { background: #1C1917; color: #E7E5E0; padding: 16px; border-radius: 8px; font-family: 'IBM Plex Mono', monospace; font-size: 13px; line-height: 1.7; overflow-x: auto; }
    .code-block .kw { color: #A78BFA; }
    .code-block .str { color: #34D399; }
    .code-block .cmt { color: #6B7280; }
    .code-block .blank { background: #374151; padding: 2px 24px; border-radius: 3px; }
    .code-file { font-size: 11px; color: #A8A29E; margin-bottom: 8px; font-family: 'IBM Plex Mono', monospace; }

    /* Markdown/Viz Panel */
    .viz-tabs { display: flex; gap: 4px; margin-bottom: 12px; }
    .viz-tab { padding: 6px 12px; font-size: 12px; border: 1px solid #E7E5E0; background: #fff; border-radius: 4px; cursor: pointer; }
    .viz-tab.active { background: #1C1917; color: #fff; border-color: #1C1917; }
    .viz-content { background: #F9FAFB; border: 1px solid #E7E5E0; border-radius: 8px; padding: 16px; min-height: 120px; }
    .viz-content h4 { font-family: 'Cormorant Garamond', serif; font-size: 18px; margin-bottom: 12px; }
    .viz-content p { line-height: 1.6; color: #57534E; margin-bottom: 10px; }
    .viz-content ul { margin-left: 18px; line-height: 1.8; }
    .viz-diagram { background: #fff; border: 1px dashed #D4D4D4; border-radius: 6px; padding: 20px; text-align: center; color: #A8A29E; font-size: 13px; }

    /* Chat */
    .chat { background: #fff; border-top: 1px solid #E7E5E0; padding: 12px 20px; flex-shrink: 0; }
    .chat-inner { display: flex; gap: 12px; align-items: center; }
    .chat-input { flex: 1; padding: 12px 16px; background: #F5F2ED; border: none; border-radius: 8px; font-size: 14px; }
    .chat-input:focus { outline: 2px solid #059669; background: #fff; }
    .chat-hint { font-size: 12px; color: #A8A29E; }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">Knowledge Forge</div>
    <div class="mode-switch">
      <button class="mode-btn build active" onclick="setMode('build')">build</button>
      <button class="mode-btn understand" onclick="setMode('understand')">understand</button>
      <button class="mode-btn research" onclick="setMode('research')">research</button>
    </div>
  </header>

  <!-- Path Bar with Neighboring Ideas -->
  <div class="path-bar">
    <span class="path-label">Path</span>
    <div class="path-trail">
      <div class="path-node"><span class="node-dot solid"></span> Prompting</div>
      <span class="path-arrow">‚Üí</span>
      <div class="path-node"><span class="node-dot solid"></span> AI Agents</div>
      <span class="path-arrow">‚Üí</span>
      <div class="path-node current"><span class="node-dot partial"></span> ReACT</div>
    </div>
    <div class="path-divider"></div>
    <span class="neighbors-label">Explore</span>
    <div class="neighbor-chips">
      <div class="neighbor-chip"><span class="icon">‚Üó</span> Reflexion</div>
      <div class="neighbor-chip"><span class="icon">‚Üó</span> Plan-Execute</div>
      <div class="neighbor-chip"><span class="icon">‚Üó</span> Memory</div>
    </div>
  </div>

  <main class="main">
    <!-- Tabbed Workspace -->
    <div class="workspace">
      <div class="tab-bar">
        <button class="tab active" onclick="showTab('chronicle')">Chronicle</button>
        <button class="tab" onclick="showTab('anchors')">Anchors</button>
        <button class="tab" onclick="showTab('boundaries')">Boundaries</button>
        <button class="tab" onclick="showTab('vocabulary')">Vocabulary</button>
        <button class="tab" onclick="showTab('curiosity')">Curiosity</button>
      </div>
      <div class="tab-content">
        <!-- Chronicle Tab -->
        <div class="tab-panel active" id="tab-chronicle">
          <div class="entry">
            <div class="entry-meta"><span class="entry-dot"></span> Building from anchor</div>
            <div class="entry-content">
              Starting with <span class="anchor">print_debugging</span> ‚Äî you mentioned debugging with prints gives you <strong>visibility into execution</strong>. This is exactly what agents need. Without visible reasoning, you can't tell why an agent made a decision.
            </div>
          </div>

          <div class="entry insight">
            <div class="entry-meta"><span class="entry-dot"></span> Insight captured</div>
            <div class="entry-content">
              <strong>"You can't see why it did what it did"</strong> ‚Äî you just constructed the core problem that ReACT solves. Agents without visible reasoning are black boxes. The Think step is like adding print statements to the agent's mind.
            </div>
          </div>

          <div class="entry">
            <div class="entry-meta"><span class="entry-dot"></span> Scaffold: Code completion</div>
            <div class="entry-content">
              Now that you see <em>why</em> agents need to think out loud, let's look at the structure. The code panel shows a ReACT step ‚Äî what should go in the blank for observation?
            </div>
          </div>

          <div class="entry doubt">
            <div class="entry-meta"><span class="entry-dot"></span> Boundary identified</div>
            <div class="entry-content">
              You asked <strong>"does it always need to observe?"</strong> ‚Äî excellent question. This is where ReACT has limits. Sometimes observation is expensive (API calls) or slow (waiting for results). We'll explore when to skip the observe step.
            </div>
          </div>

          <div class="entry">
            <div class="entry-meta"><span class="entry-dot"></span> Next scaffold</div>
            <div class="entry-content">
              Now that you've identified the observe step, let's examine what happens when observation fails. What should the agent do if the search returns no results?
            </div>
          </div>
        </div>

        <!-- Anchors Tab -->
        <div class="tab-panel" id="tab-anchors">
          <div class="anchor-grid">
            <div class="anchor-card strong">
              <div class="anchor-name">print_debugging</div>
              <div class="anchor-use">‚Üí Visibility insight, ReACT reasoning</div>
            </div>
            <div class="anchor-card strong">
              <div class="anchor-name">recipe_following</div>
              <div class="anchor-use">‚Üí Step-by-step execution pattern</div>
            </div>
            <div class="anchor-card medium">
              <div class="anchor-name">error_handling</div>
              <div class="anchor-use">‚Üí Observation failure recovery</div>
            </div>
            <div class="anchor-card medium">
              <div class="anchor-name">state_machines</div>
              <div class="anchor-use">‚Üí Agent loop structure</div>
            </div>
          </div>
        </div>

        <!-- Boundaries Tab -->
        <div class="tab-panel" id="tab-boundaries">
          <div class="boundary-item">
            <div class="boundary-question">"Does it always need to observe?"</div>
            <div class="boundary-note">Observation can be expensive or slow. Sometimes agents act on assumptions. This is where ReACT has limits ‚Äî worth exploring Plan-and-Execute as alternative.</div>
          </div>
          <div class="boundary-item">
            <div class="boundary-question">"What if the observation fails?"</div>
            <div class="boundary-note">Error handling in agent loops. Need fallback strategies ‚Äî retry, ask user, or graceful degradation.</div>
          </div>
          <div class="boundary-item">
            <div class="boundary-question">"How deep should reasoning go?"</div>
            <div class="boundary-note">Trade-off between thorough thinking and token costs. Over-reasoning can be worse than acting quickly.</div>
          </div>
        </div>

        <!-- Vocabulary Tab -->
        <div class="tab-panel" id="tab-vocabulary">
          <div class="vocab-item">
            <div class="vocab-term">ReACT</div>
            <div class="vocab-def">Reasoning + Acting pattern. Agent thinks out loud before each action, making decisions transparent and debuggable.</div>
          </div>
          <div class="vocab-item">
            <div class="vocab-term">Observation</div>
            <div class="vocab-def">The result of an action ‚Äî what the agent "sees" after acting. Feeds into next reasoning step.</div>
          </div>
          <div class="vocab-item">
            <div class="vocab-term">Scaffold</div>
            <div class="vocab-def">Partial structure provided to help build understanding. Fill-in-the-blank exercises, code templates.</div>
          </div>
          <div class="vocab-item">
            <div class="vocab-term">Anchor</div>
            <div class="vocab-def">Existing knowledge used as foundation for new concepts. Print debugging ‚Üí agent visibility.</div>
          </div>
        </div>

        <!-- Curiosity Tab -->
        <div class="tab-panel" id="tab-curiosity">
          <div class="curiosity-list">
            <div class="curiosity-item">
              <span class="curiosity-icon">üîç</span>
              <div>
                <div class="curiosity-label">Explore next</div>
                <div class="curiosity-text"><strong>Reflexion</strong> ‚Äî self-critique after observe, catching mistakes before acting again</div>
              </div>
            </div>
            <div class="curiosity-item">
              <span class="curiosity-icon">üîç</span>
              <div>
                <div class="curiosity-label">Alternative pattern</div>
                <div class="curiosity-text"><strong>Plan-and-Execute</strong> ‚Äî when to plan upfront vs react step-by-step</div>
              </div>
            </div>
            <div class="curiosity-item">
              <span class="curiosity-icon">üìö</span>
              <div>
                <div class="curiosity-label">Research seed</div>
                <div class="curiosity-text">"How do production agents handle API failures and timeouts?"</div>
              </div>
            </div>
            <div class="curiosity-item">
              <span class="curiosity-icon">üîó</span>
              <div>
                <div class="curiosity-label">Connection</div>
                <div class="curiosity-text">This connects to <strong>Memory</strong> ‚Äî agents remembering past observations across sessions</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Code Panel -->
    <div class="panel">
      <div class="panel-header">
        <span class="panel-title">Code Workshop</span>
        <div class="panel-actions">
          <button class="panel-btn" title="Run">‚ñ∂</button>
          <button class="panel-btn" title="Copy">üìã</button>
        </div>
      </div>
      <div class="panel-body">
        <div class="code-file">react_agent.py</div>
        <div class="code-block">
<span class="kw">def</span> react_step(agent, task):
    <span class="cmt"># Think: Reason about the task</span>
    thought = agent.think(task)

    <span class="cmt"># Act: Choose and execute action</span>
    action = agent.act(thought)

    <span class="cmt"># Observe: Get result</span>
    observation = <span class="blank"></span>

    <span class="kw">return</span> observation

<span class="kw">def</span> react_loop(agent, task):
    <span class="kw">while not</span> agent.is_done():
        obs = react_step(agent, task)
        task = agent.update(obs)
        </div>
      </div>
    </div>

    <!-- Markdown/Visualization Panel -->
    <div class="panel">
      <div class="panel-header">
        <span class="panel-title">Canvas</span>
        <div class="panel-actions">
          <button class="panel-btn" title="Export">‚Üó</button>
        </div>
      </div>
      <div class="panel-body">
        <div class="viz-tabs">
          <button class="viz-tab active" onclick="showViz('summary')">Summary</button>
          <button class="viz-tab" onclick="showViz('diagram')">Diagram</button>
          <button class="viz-tab" onclick="showViz('notes')">Notes</button>
        </div>
        <div class="viz-content" id="viz-summary">
          <h4>ReACT Agent Pattern</h4>
          <p>A reasoning framework where agents <strong>think before acting</strong>, making decisions transparent and debuggable.</p>
          <ul>
            <li><strong>Think</strong> ‚Äî Reason about current state</li>
            <li><strong>Act</strong> ‚Äî Execute chosen action</li>
            <li><strong>Observe</strong> ‚Äî Process result</li>
          </ul>
        </div>
        <div class="viz-content" id="viz-diagram" style="display:none;">
          <div class="viz-diagram">
            [Diagram: Think ‚Üí Act ‚Üí Observe ‚Üí Loop]<br><br>
            <em>Mermaid/D3 visualization would render here</em>
          </div>
        </div>
        <div class="viz-content" id="viz-notes" style="display:none;">
          <p><strong>Key insight:</strong> Print debugging analogy ‚Äî visibility into agent reasoning.</p>
          <p><strong>Open question:</strong> When to skip observation step?</p>
          <p><strong>Next:</strong> Explore error handling in observation phase.</p>
        </div>
      </div>
    </div>
  </main>

  <div class="chat">
    <div class="chat-inner">
      <input type="text" class="chat-input" placeholder="Continue the conversation...">
      <span class="chat-hint">‚Üµ to send</span>
    </div>
  </div>

  <script>
    function showTab(name) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById('tab-' + name).classList.add('active');
    }

    function showViz(name) {
      document.querySelectorAll('.viz-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.viz-content').forEach(c => c.style.display = 'none');
      event.target.classList.add('active');
      document.getElementById('viz-' + name).style.display = 'block';
    }

    function setMode(mode) {
      document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
      document.querySelector('.mode-btn.' + mode).classList.add('active');

      // Update accent colors based on mode
      const root = document.documentElement;
      const colors = {
        build: '#059669',
        understand: '#2563EB',
        research: '#7C3AED'
      };
      // Could update CSS variables here for full theme switching
    }
  </script>
</body>
</html>
